# “Massive Storage”第二届大学生信息存储技术竞赛·挑战赛

## 开发环境要求：
Ubuntu  ≥ 	18.04
cmake	≥  	3.27.5
make	≥ 	4.1
GCC		≥ 	7.5

## 编译运行

```shell
# 命令
cd project_hw
mkdir build
cd build
cmake ..
make
../bin/project_hw -f ../test/dataset/case_1.txt
```

```shell
cd build
rm -rf *
cmake ..
make
../bin/project_hw -f ../test/dataset/case_1.txt
```

## 项目目录结构
```
...
```

## 探索与测试
### 初步测试 
每列表示:对应算法的结果的 寻址时间(ms)，除先入先出算法，另外算法采用LKH2，问题类型ATSP，参数为默认值
| 算例     | 先入先出   | 无虚拟结点 |  虚拟结点 | 虚拟+考虑磁头 |
|----------|-----------|-----------|----------|--------------|
| case1    |  1362738  |  623643   |  354295  |    354295    |
| case2    |  850195   |  429979   |  293696  |    293696    |
| case3    |  1003042  |  545996   |  495332  |    355182    |
| case4    |  3859545  |  676173   |  685706  |    626477    |
| case5    |  7664161  |  1082234  |  996508  |    885576    |

---

### 换LKH3, 其实在这个问题上感觉用LKH2或3没啥差别
---
### 10月6日:
ascent中使用子梯度优化，记采用 Ascent 为 A（先ascent后启发式），不采用 Ascent 为 B(即直接启发式)  
| 算例      |  IO 数量  | 总时间限制 | Ascent时间| 初始Cost(A)  | 结束Cost(A)       | 初始Cost(B)| 结束Cost(B)    |  
|----------|-----------|-----------|-----------|-----------   |------------------ |------------|---------------|
| case20   |  10       |  20s      |  0.00s    |  311985(精确)|        -          | 372754     | 325274(run=4 end)|
| case80   |  50       |  20s      |  0.01s    |  657837      |  657837(0.00s)    | 3951869    |677259(run=10) |
| case5    |  90       |  20s      |  0.02s    |  885576      |  885576(0.00s)    | 7433988    |960172(run=10) |
| case100  |  100      |  20s      |  0.03s    |  962238      |  905808(0.00s)    | 8931135    |1002438(run=10)|
| case150  |  1000     |  20s      |  3s       |  2884045     |  2884027(3s)      | 80453705   |3144666(run=5) |
| case200  |  2000     |  20s      |  16s      |  4947756     |  4246606          | 158915229  |13214868(run=1)|
| case245  |  5000     |  300s     |  221s     |  13382658    |  6639884          | 92080589   |10026902       |
| case285  |  10000    |  inf      |  6493s    |  11280991    |  8741567(11999s)  | 359416893  |322422444(60s) |  

发现：
1. ascent的作用是巨大的，ascent结束后得到的初始解就比较优，后续也能通过启发式继续优化
2. 目前看 io <= 2000 的算例都能在20s内ascent成功
3. 每次run结果一样的原因：因为在第一次run就抵达了局部最优；而直接启发式的时候，每次run都是有改进的
4. 直接启发式的话，初始解通常很差，搜索20s后其解仍比较差，比不上先ascent后启发式，甚至比不上ascent得到的初始解
5. 直接启发式，一般得不到精确解，会卡在局部最优，比如case20，在run=4得到局部最优，后续run再无法改进
结论：
1. io <= 2000 的算例直接 ascent 后启发式就行，如果20s前启发式改进幅度大于调度加分，继续搜索（tip:一般继续搜索更好？）；  
    如果20s后启发式的改进幅度仍大于超时惩罚，可以允许继续搜索（tip:超时罚分还是比较大的）
2. 大算例比如 io >= 5000, 先ascent是不可取的，因为超时惩罚无法接受，比如case245，跑300s将得到负分；  
    直接启发式20s内可以得到比基线更好的解，比如case245，直接启发式20s得到的解对比于scan提升幅度是400%
3. 超大算例，io = 10000, 直接启发式也是不可取了，因为20s跑出的结果比基线还差
4. 还是得尝试划分子问题，看解是否比直接启发式更好

### 10月7日 新发现
ascent中使用POPMUSIC模式生成候选集，而不用 ALPHA模式+子梯度优化  
| 算例      |  IO 数量  | 总时间限制 | Ascent时间|   初始Cost   |       结束Cost    | 
|----------|-----------|-----------|-----------|--------------|------------------ |
| case20   |  10       |  20s      |  0.00s    |  311985(精确)|        -          |
| case80   |  50       |  20s      |  0.03s    |  657837      |  657837(0.00s)    |
| case5    |  90       |  20s      |  0.03s    |  885576      |  885576(0.00s)    |
| case100  |  100      |  20s      |  0.05s    |  905808      |  905808(0.00s)    |
| case150  |  1000     |  20s      |  0.8s     |  2918033     |  2886032          |
| case200  |  2000     |  20s      |  2.3s     |  4521253     |  4255691          |
| case245  |  5000     |  20s      |  10.27s   |  6601191     |  6374933          |
| case285  |  10000    |  60s      |  38.33s   |  11238502    |  10715782         |

发现：
1. 震惊我了，不愧是线性时间复杂度啊，怪不得能单独发论文
2. 在 io <= 2000 时，最终结果和子梯度优化不相上下（略差）；   
   在 io > 2000 时，无论是时间上还是最终结果上都优于 ALPHA模式+子梯度优化。
3. 虽然它很快，但是它生成的候选集的质量应该是稍微逊色于 ALPHA模式+子梯度优化 一筹，  
   所以在中等算例上，子梯度优化后的启发式的收敛速度更快，比如case150，  
   启发式搜索了3s就收敛到局部最优，而此处搜索了19s仍未收敛，这可以赚点调度加分（待进一步验证）  
4. 此外，我验证了令参数 POPMUSIC_Solutions = 25; 即默认值减半，发现IO为10000的也能20秒ascent完，  
   且因为没超时，最终分数还会高些
结论：
1. 大规模算例就该使用 POPMUSIC模式
2. 其次，可以比较一下各种较小规模io下，是采用 ALPHA模式+子梯度优化 更优还是POPMUSIC更优

### 10月8日 新发现
发现：
1. 最近邻算法得到的解就比较好，比SCAN好很多；**使用最近邻算法得到的解作为 LKH 的初始解，会使结果变好很多**，该初始解也应作为划分子问题时的依据
2. **划分子问题会使结果略差，但是能降低求解时间**，IO=10000的算例划分为4个子问题较佳


### 10月10日 
### 回退使用LKH2, 并拷贝到 LKH2_MIN, 在其中任意修改
---
#### 中阶算例 POP_MUSIC Ascent Time 统计
| 算例     |  IO 数量    |Ascent Time| 初始Cost  |  结束Cost |
|----------|------------|-----------|-----------|-----------|
| case180  |  2000      |  2.18s    |  4129929  |  4052588  |
| case420  |  3000      |  4.24s    |  5023292  |  4981325  |
| case460  |  4000      |  6.91s    |  5843256  |  5777847  |
| case230  |  5000      |  9.98s    |  6709219  |  6641096  |
| case500  |  6000      |  14.23s   |  6985376  |  6962341  |
| case540  |  7000      |  17.91s   |  7802182  |  7786246  |

#### 策略设计
1. 启发式搜索跳出策略：改进幅度小于调度用时加分时尽快跳出，其次尽量不超时。
   + 当前总用时<20s时，若timeSpan秒（timeSpan是个参数，可以设置为<=2的值）内的改进得分大于timeSpan*10000，则继续搜索，否则退出；
   + 当前总用时>=20s时，立即退出。（因为极大概率罚分大于改进幅度）
2. 候选集的生成策略：能用ALPHA模式就用，时间捉襟见肘的话（还要考虑调度用时加分），就换为POP_MUSIC模式。
   + 当IO<=1750时，使用ALPHA模式生成候选集（IO=1750，ALPHA模式 Ascent Time 约为 10.5s）
   + 当IO>1750时，使用POP_MUSIC模式生成候选集
3. 子问题划分策略：能不划分就不划分，必须划分时则保证尽量少的划分（注意只支持等分，故每个子问题分配相同的时间）。
   + 当IO<=6000时，不划分子问题（IO=6000，POP_MUSIC模式 Ascent Time 约为 13.7s）
   + 当IO>6000时，划分子问题:（暂定：划分子问题后只完整求解一个轮次，因为完整执行第二轮的时间不够。**改进：IO<7000时，第二轮或许可以完成一部分**）
   + + 6000 < IO <= 7000时，划分为2个子问题
   + + 7000 < IO <= 9000时，划分为3个子问题
   + + IO > 9000时，划分为4个子问题

### 10月11日
租用华为云ECS鲲鹏通用计算增强型kc2, 2vCPU、4GB内存的服务器（比赛测试环境），简单试了下，服务器的运算速度跟10月10日的本地环境运算速度差不多，服务器还快一点点，因此10月10日设置的策略大体上没问题。

### 10月12日
+ 微调了LKH_MIN代码，使得每次求解必执行完一次Trial(即Trial==1时不判断时限来退出，注意每次Trial用时约<0.02s)，由此保证不会输出0序列；
+ 修改了SubProblemTotalTimeLimit的计算方式，每次执行子任务前都重新计算，这样可以将‘因前面子任务提前跳出而省下的时间’分配给后面的子任务使用。

### 10月13日 策略改进方向
经过深入阅读论文和实测，发现POP_MUSIC模式+少量次梯度优化也可以提升解质量，当然时间会增加，所以一个改进是当时间比较充裕时，通过增加次梯度优化的量，来达到更好的解。这个改进可以聚焦于 1750 < IO <= 6000 的规模，更大的规模时间就比较紧张了。

## 调参与测试
### 10月14日
#### 增量节点0：采用10月10日策略+默认参数
[增量节点0](./test/调参增量节点/增量节点0)
|   算例   |  IO数量 |子问题数 | Ascent时间|局部搜索最多用时|  最终Cost |
|----------|--------|---------|----------|---------------|----------|
|  case_5  |   90   |    1    |  0.02s   |      0s       |  885576  |
| case_20  |   10   |    1    |  0.00s   |      0s       |  311985  |
| case_80  |   50   |    1    |  0.01s   |     0.01s     |  657837  |
| case_100 |  100   |    1    |  0.04s   |     0.00s     |  905808  |
| case_150 |  1000  |    1    |  3.27s   |     2.29s     | 2884027  |
| case_200 |  2000  |    1    |  1.97s   |     6.04s     | 4240458  |
| case_245 |  5000  |    1    |  10.90s  |     8.24s     | 5784630  |
| case_285 | 10000  |    4    |  3.22s   |     0.98s     | 9048322  |
| case_290 |  1350  |    1    |  5.51s   |     4.00s     | 3208503  |
| case_300 |  1500  |    1    |  7.08s   |     4.01s     | 3520424  |
| case_305 |  1750  |    1    |  9.87s   |     4.01s     | 3427710  |
| case_310 |  3000  |    1    |  4.02s   |    12.07s     | 4981597  |
| case_320 |  4000  |    1    |  6.82s   |    12.12s     | 5782089  |
| case_330 |  6000  |    1    |  15.14s  |     3.67s     | 7145686  |
| case_335 |  7000  |    2    |  5.52s   |     3.67s     | 6808325  |
| case_345 |  8000  |    3    |  3.50s   |     2.43s     | 7631988  |
| case_355 |  9000  |    3    |  4.27s   |     1.52s     | 8032370  |
| case_365 |  9500  |    4    |  2.96s   |     1.32s     | 7753174  |

#### 增量节点1：增量节点0+moveType从5改为3
[增量节点1](./test/调参增量节点/增量节点1)
|   算例   |  IO数量 |子问题数 | Ascent时间|局部搜索最多用时|  最终Cost |
|----------|--------|---------|----------|---------------|----------|
|  case_5  |   90   |    1    |  0.02s   |      0s       |  885576  |
| case_20  |   10   |    1    |  0.00s   |      0s       |  311985  |
| case_80  |   50   |    1    |  0.01s   |     0.01s     |  657837  |
| case_100 |  100   |    1    |  0.04s   |     0.00s     |  905808  |
| case_150 |  1000  |    1    |  3.32s   |     1.97s     | 2884027  |
| case_200 |  2000  |    1    |  2.02s   |    14.07s     | 4218082  |
| case_245 |  5000  |    1    |  10.82s  |     8.14s     | 5749312  |
| case_285 | 10000  |    4    |  3.25s   |     0.96s     | 9029224  |
| case_290 |  1350  |    1    |  5.72s   |     4.00s     | 3208503  |
| case_300 |  1500  |    1    |  7.13s   |     4.00s     | 3520424  |
| case_305 |  1750  |    1    |  9.79s   |     4.01s     | 3426773  |
| case_310 |  3000  |    1    |  3.93s   |     8.07s     | 4984098  |
| case_320 |  4000  |    1    |  6.98s   |     8.13s     | 5785633  |
| case_330 |  6000  |    1    |  14.93s  |     3.87s     | 7079822  |
| case_335 |  7000  |    2    |  5.47s   |     3.72s     | 6769425  |
| case_345 |  8000  |    3    |  3.48s   |     2.65s     | 7626040  |
| case_355 |  9000  |    3    |  4.30s   |     1.50s     | 8023319  |
| case_365 |  9500  |    4    |  2.94s   |     1.32s     | 7732121  |  

分析：IO<=1500时，平局；此外除IO=3000,4000的变差几千，其余都是提升，其中1750的有千级提升，其余均有万级提升  
原因：...  
策略：所有规模均采用 moveType = 3    

#### 增量节点2：增量节点1+AscentCandidates从50改为25
[增量节点2](./test/调参增量节点/增量节点2)
|   算例   |  IO数量 |子问题数 | Ascent时间|局部搜索最多用时|  最终Cost |
|----------|--------|---------|----------|---------------|----------|
|  case_5  |   90   |    1    |  0.01s   |     0.01s     |  885576  |
| case_20  |   10   |    1    |  0.00s   |      0s       |  311985  |
| case_80  |   50   |    1    |  0.01s   |     0.01s     |  657837  |
| case_100 |  100   |    1    |  0.03s   |     0.00s     |  905808  |
| case_150 |  1000  |    1    |  1.96s   |     3.62s     | 2884027  |
| case_200 |  2000  |    1    |  1.99s   |    12.05s     | 4224370  |
| case_245 |  5000  |    1    |  10.66s  |     8.49s     | 5753431  |
| case_285 | 10000  |    4    |  3.21s   |     1.01s     | 9001178  |
| case_290 |  1350  |    1    |  3.88s   |     4.00s     | 3208577  |
| case_300 |  1500  |    1    |  5.42s   |     4.01s     | 3525280  |
| case_305 |  1750  |    1    |  11.58s  |     4.01s     | 3427427  |
| case_310 |  3000  |    1    |  3.91s   |     8.07s     | 4990047  |
| case_320 |  4000  |    1    |  6.92s   |     6.09s     | 5782861  |
| case_330 |  6000  |    1    |  15.01s  |     3.86s     | 7075477  |
| case_335 |  7000  |    2    |  5.58s   |     3.66s     | 6775982  |
| case_345 |  8000  |    3    |  3.49s   |     2.46s     | 7622916  |
| case_355 |  9000  |    3    |  4.25s   |     1.55s     | 7998009  |
| case_365 |  9500  |    4    |  2.94s   |     1.33s     | 7728758  |

分析：有好有差，变动幅度也不大，千级
原因：...  
策略：所有规模均不采用  

#### 增量节点3：增量节点1+POPMUSIC_SampleSize从10到15+POPMUSIC_Solutions从50到15+POPMUSIC_Trials从1到3
[增量节点3](./test/调参增量节点/增量节点3)
|   算例   |  IO数量 |子问题数 | Ascent时间|局部搜索最多用时|  最终Cost |
|----------|--------|---------|----------|---------------|----------|
|  case_5  |   90   |    1    |  0.02s   |      0s       |  885576  |
| case_20  |   10   |    1    |  0.00s   |      0s       |  311985  |
| case_80  |   50   |    1    |  0.01s   |     0.01s     |  657837  |
| case_100 |  100   |    1    |  0.04s   |     0.00s     |  905808  |
| case_150 |  1000  |    1    |  3.46s   |     1.97s     | 2884027  |
| case_200 |  2000  |    1    |  0.70s   |     6.03s     | 4222865  |
| case_245 |  5000  |    1    |  3.62s   |     8.25s     | 5787982  |
| case_285 | 10000  |    4    |  1.29s   |     3.03s     | 8984782  |
| case_290 |  1350  |    1    |  5.74s   |     4.00s     | 3208503  |
| case_300 |  1500  |    1    |  7.42s   |     4.00s     | 3520424  |
| case_305 |  1750  |    1    |  9.67s   |     4.01s     | 3426846  |
| case_310 |  3000  |    1    |  1.44s   |    14.10s     | 4974368  |
| case_320 |  4000  |    1    |  2.34s   |    12.10s     | 5784531  |
| case_330 |  6000  |    1    |  4.87s   |    10.18s     | 7074405  |
| case_335 |  7000  |    2    |  2.15s   |     6.19s     | 6787111  |
| case_345 |  8000  |    3    |  1.37s   |     5.10s     | 7610332  |
| case_355 |  9000  |    3    |  1.64s   |     3.04s     | 7969800  |
| case_365 |  9500  |    4    |  1.21s   |     3.03s     | 7726309  |

分析：POPMUSIC的Ascent时间显著减少了，局部搜索时间增加了...
原因：...  
策略：...

### 10月16日 策略大更改
1. 测试算例缩减，只考虑官方指定的规模：10,50,100,1000,2000,5000,10000.
2. 启发式搜索跳出策略：允许超时，因为发现超时罚分较少。 
   + 搜索退出控制：若timeSpan秒内的改进Cost 大于 timeSpan*20，则继续搜索，否则退出；
   + 其次，设置一个比较大的总时间限制(比如300-400s)，防止跑的时间过于长了。
3. 候选集的生成策略：小规模ALPHA模式+次梯度优化，大规模仅用POP_MUSIC模式。
   + 当IO<=1500时，使用ALPHA模式生成候选集；
   + 当IO>1500时，使用POP_MUSIC模式生成候选集。
4. 子问题划分策略：全部不划分，因为通过减少POPMUSIC_Solutions参数大小，可以减少执行时间，且效果要比划分要好。

#### 增量节点4：10月16日策略
[增量节点4](./test/调参增量节点/增量节点4)
|   算例   |  IO数量 |子问题数 | Ascent时间|局部搜索最多用时|  最终Cost |
|----------|--------|---------|----------|---------------|----------|
|  case_1  |   10   |    1    |  0.00s   |      0s       |  285068  |
|  case_2  |   10   |    1    |  0.00s   |      0s       |  308991  |
|  case_3  |   10   |    1    |  0.00s   |      0s       |  368584  |
|  case_4  |   10   |    1    |  0.00s   |      0s       |  220352  |
|  case_5  |   10   |    1    |  0.00s   |      0s       |  338956  |
|  case_6  |   10   |    1    |  0.00s   |      0s       |  259553  |
|  case_7  |   10   |    1    |  0.00s   |      0s       |  282807  |
|  case_8  |   10   |    1    |  0.00s   |      0s       |  249496  |
|  case_9  |   50   |    1    |  0.01s   |     0.00s     |  666119  |
| case_10  |   50   |    1    |  0.01s   |      0s       |  550503  |
| case_11  |   50   |    1    |  0.01s   |     0.00s     |  647764  |
| case_12  |   50   |    1    |  0.01s   |     0.00s     |  528100  |
| case_13  |   50   |    1    |  0.01s   |     0.00s     |  653578  |
| case_14  |   50   |    1    |  0.01s   |      0s       |  455149  |
| case_15  |   50   |    1    |  0.01s   |     0.00s     |  682731  |
| case_16  |   50   |    1    |  0.01s   |     0.00s     |  578165  |
| case_17  |  100   |    1    |  0.02s   |     0.00s     |  910244  |
| case_18  |  100   |    1    |  0.02s   |      0s       |  708750  |
| case_19  |  100   |    1    |  0.02s   |      0s       |  885041  |
| case_20  |  100   |    1    |  0.03s   |     0.00s     |  704578  |
| case_21  |  100   |    1    |  0.02s   |      0s       |  855075  |
| case_22  |  100   |    1    |  0.02s   |     0.01s     |  784901  |
| case_23  |  100   |    1    |  0.02s   |     0.00s     |  880008  |
| case_24  |  100   |    1    |  0.03s   |      0s       |  741581  |
| case_25  |  1000  |    1    |  2.72s   |     2.53s     | 2806964  |
| case_26  |  1000  |    1    |  2.72s   |     3.59s     | 2434821  |
| case_27  |  1000  |    1    |  2.79s   |     1.95s     | 2818284  |
| case_28  |  1000  |    1    |  4.26s   |     4.00s     | 2682971  |
| case_29  |  1000  |    1    |  3.19s   |     2.60s     | 2776843  |
| case_30  |  1000  |    1    |  2.75s   |     3.80s     | 2561019  |
| case_31  |  1000  |    1    |  2.82s   |     2.88s     | 2978178  |
| case_32  |  1000  |    1    |  2.86s   |     4.00s     | 2513562  |
| case_33  |  2000  |    1    |  3.48s   |    10.03s     | 4080432  |
| case_34  |  2000  |    1    |  3.50s   |    14.08s     | 3582922  |
| case_35  |  2000  |    1    |  3.66s   |    12.05s     | 4444497  |
| case_36  |  2000  |    1    |  3.62s   |    12.07s     | 3652622  |
| case_37  |  2000  |    1    |  3.57s   |    28.12s     | 4181782  |
| case_38  |  2000  |    1    |  3.54s   |    18.12s     | 3576480  |
| case_39  |  2000  |    1    |  3.54s   |    12.06s     | 4319122  |
| case_40  |  2000  |    1    |  3.66s   |    12.08s     | 3826821  |
| case_41  |  5000  |    1    |  17.46s  |    22.52s     | 6640375  |
| case_42  |  5000  |    1    |  17.45s  |    49.50s     | 5796574  |
| case_43  |  5000  |    1    |  17.41s  |    30.56s     | 6541960  |
| case_44  |  5000  |    1    |  17.35s  |    20.47s     | 5741554  |
| case_45  |  5000  |    1    |  17.40s  |    12.24s     | 6513918  |
| case_46  |  5000  |    1    |  17.62s  |    22.69s     | 5983836  |
| case_47  |  5000  |    1    |  17.83s  |    12.34s     | 6846437  |
| case_48  |  5000  |    1    |  17.46s  |    20.58s     | 6020557  |
| case_49  | 10000  |    1    |  49.76s  |    21.75s     | 9189569  |
| case_50  | 10000  |    1    |  49.57s  |    41.58s     | 9096970  |
| case_51  | 10000  |    1    |  50.26s  |    25.53s     | 9124759  |
| case_52  | 10000  |    1    |  50.02s  |    35.48s     | 8269607  |
| case_53  | 10000  |    1    |  49.84s  |    31.99s     | 9278957  |
| case_54  | 10000  |    1    |  49.42s  |    27.73s     | 8460395  |
| case_55  | 10000  |    1    |  49.42s  |    43.68s     | 9512205  |
| case_56  | 10000  |    1    |  49.73s  |    20.51s     | 8059369  |  
与SCAN基线对比：  
调度算法总加分:17529169570.00	调度用时总加分:6147.90	调度超时总罚分:120734.16	排序错误总数量:0.00	  
总分:17529054983.74


#### 增量节点5：增量节点4 + 修改不同规模的POPMUSIC_Solutions参数大小
[增量节点5](./test/调参增量节点/增量节点5)
|   算例   |  IO数量 |子问题数 | Ascent时间|局部搜索最多用时|  最终Cost |
|----------|--------|---------|----------|---------------|----------|
|  case_1  |   10   |    1    |  0.00s   |      0s       |  285068  |
|  case_2  |   10   |    1    |  0.00s   |      0s       |  308991  |
|  case_3  |   10   |    1    |  0.00s   |      0s       |  368584  |
|  case_4  |   10   |    1    |  0.00s   |      0s       |  220352  |
|  case_5  |   10   |    1    |  0.00s   |      0s       |  338956  |
|  case_6  |   10   |    1    |  0.00s   |      0s       |  259553  |
|  case_7  |   10   |    1    |  0.00s   |      0s       |  282807  |
|  case_8  |   10   |    1    |  0.00s   |      0s       |  249496  |
|  case_9  |   50   |    1    |  0.01s   |     0.00s     |  666119  |
| case_10  |   50   |    1    |  0.01s   |      0s       |  550503  |
| case_11  |   50   |    1    |  0.01s   |     0.00s     |  647764  |
| case_12  |   50   |    1    |  0.01s   |     0.00s     |  528100  |
| case_13  |   50   |    1    |  0.02s   |     0.00s     |  653578  |
| case_14  |   50   |    1    |  0.01s   |      0s       |  455149  |
| case_15  |   50   |    1    |  0.01s   |     0.00s     |  682731  |
| case_16  |   50   |    1    |  0.01s   |     0.00s     |  578165  |
| case_17  |  100   |    1    |  0.02s   |     0.00s     |  910244  |
| case_18  |  100   |    1    |  0.02s   |      0s       |  708750  |
| case_19  |  100   |    1    |  0.02s   |      0s       |  885041  |
| case_20  |  100   |    1    |  0.02s   |     0.00s     |  704578  |
| case_21  |  100   |    1    |  0.02s   |      0s       |  855075  |
| case_22  |  100   |    1    |  0.02s   |     0.01s     |  784901  |
| case_23  |  100   |    1    |  0.02s   |     0.00s     |  880008  |
| case_24  |  100   |    1    |  0.03s   |      0s       |  741581  |
| case_25  |  1000  |    1    |  2.75s   |     2.55s     | 2806964  |
| case_26  |  1000  |    1    |  2.66s   |     3.61s     | 2434821  |
| case_27  |  1000  |    1    |  2.75s   |     1.91s     | 2818284  |
| case_28  |  1000  |    1    |  4.28s   |     4.00s     | 2682971  |
| case_29  |  1000  |    1    |  3.19s   |     2.68s     | 2776843  |
| case_30  |  1000  |    1    |  2.79s   |     3.77s     | 2561019  |
| case_31  |  1000  |    1    |  2.76s   |     2.77s     | 2978178  |
| case_32  |  1000  |    1    |  2.82s   |     4.00s     | 2513562  |
| case_33  |  2000  |    1    |  3.50s   |    14.08s     | 4078581  |
| case_34  |  2000  |    1    |  3.44s   |    14.06s     | 3582922  |
| case_35  |  2000  |    1    |  3.50s   |    12.04s     | 4444534  |
| case_36  |  2000  |    1    |  3.51s   |    12.08s     | 3652583  |
| case_37  |  2000  |    1    |  3.45s   |    30.11s     | 4181780  |
| case_38  |  2000  |    1    |  3.46s   |    18.06s     | 3576480  |
| case_39  |  2000  |    1    |  3.51s   |    12.07s     | 4319122  |
| case_40  |  2000  |    1    |  3.41s   |    12.07s     | 3826821  |
| case_41  |  5000  |    1    |  6.87s   |    42.87s     | 6642402  |
| case_42  |  5000  |    1    |  6.68s   |    14.33s     | 5812524  |
| case_43  |  5000  |    1    |  6.76s   |    14.35s     | 6558989  |
| case_44  |  5000  |    1    |  6.75s   |    37.11s     | 5740503  |
| case_45  |  5000  |    1    |  6.77s   |    26.41s     | 6514149  |
| case_46  |  5000  |    1    |  6.81s   |    16.51s     | 5984637  |
| case_47  |  5000  |    1    |  6.76s   |    28.70s     | 6846981  |
| case_48  |  5000  |    1    |  6.97s   |    24.80s     | 6024386  |
| case_49  | 10000  |    1    |  9.58s   |    27.35s     | 9210713  |
| case_50  | 10000  |    1    |  9.75s   |    56.00s     | 9151430  |
| case_51  | 10000  |    1    |  9.69s   |    29.33s     | 9157904  |
| case_52  | 10000  |    1    |  9.63s   |    21.52s     | 8371404  |
| case_53  | 10000  |    1    |  9.76s   |    48.42s     | 9288671  |
| case_54  | 10000  |    1    |  9.84s   |    21.75s     | 8504523  |
| case_55  | 10000  |    1    |  9.74s   |    40.25s     | 9544311  |
| case_56  | 10000  |    1    |  9.76s   |    17.27s     | 8144494  | 
与SCAN基线对比：   
调度算法总加分:17524978330.00	调度用时总加分:6115.54	调度超时总罚分:52251.27	排序错误总数量:0.00	  
总分:17524932194.27

### 10月17日 小修
考虑到如果实际测试环境那边跑这么慢的话，我们设的TimeSpan=2s 可能跑不了多少Trails，
故可以等价替换成执行Trails的次数，即对应多少次Trails之内没啥改进就退出.  
如下是对应1s内每种规模能跑的Trials次数:
```C
    int TrialSpan = 100;
    if(DimensionSaved <= 1002)
        TrialSpan = 400;
    else if(DimensionSaved <= 2002)
        TrialSpan = 58;
    else if(DimensionSaved <= 5002)
        TrialSpan = 12;
    else
        TrialSpan = 4;
```
#### 增量节点6：10月17日策略 + 增量节点5的参数
[增量节点6](./test/调参增量节点/增量节点6)
|   算例   |  IO数量 |子问题数 | Ascent时间|局部搜索最多用时|  最终Cost |
|----------|--------|---------|----------|---------------|----------|
|  case_1  |   10   |    1    |  0.00s   |      0s       |  285068  |
|  case_2  |   10   |    1    |  0.00s   |      0s       |  308991  |
|  case_3  |   10   |    1    |  0.00s   |      0s       |  368584  |
|  case_4  |   10   |    1    |  0.00s   |      0s       |  220352  |
|  case_5  |   10   |    1    |  0.00s   |      0s       |  338956  |
|  case_6  |   10   |    1    |  0.00s   |      0s       |  259553  |
|  case_7  |   10   |    1    |  0.00s   |      0s       |  282807  |
|  case_8  |   10   |    1    |  0.00s   |      0s       |  249496  |
|  case_9  |   50   |    1    |  0.01s   |     0.00s     |  666119  |
| case_10  |   50   |    1    |  0.01s   |      0s       |  550503  |
| case_11  |   50   |    1    |  0.01s   |     0.00s     |  647764  |
| case_12  |   50   |    1    |  0.01s   |     0.00s     |  528100  |
| case_13  |   50   |    1    |  0.01s   |     0.00s     |  653578  |
| case_14  |   50   |    1    |  0.01s   |      0s       |  455149  |
| case_15  |   50   |    1    |  0.01s   |     0.00s     |  682731  |
| case_16  |   50   |    1    |  0.01s   |     0.00s     |  578165  |
| case_17  |  100   |    1    |  0.02s   |     0.00s     |  910244  |
| case_18  |  100   |    1    |  0.02s   |      0s       |  708750  |
| case_19  |  100   |    1    |  0.02s   |      0s       |  885041  |
| case_20  |  100   |    1    |  0.02s   |     0.00s     |  704578  |
| case_21  |  100   |    1    |  0.02s   |      0s       |  855075  |
| case_22  |  100   |    1    |  0.02s   |     0.01s     |  784901  |
| case_23  |  100   |    1    |  0.02s   |     0.00s     |  880008  |
| case_24  |  100   |    1    |  0.03s   |      0s       |  741581  |
| case_25  |  1000  |    1    |  2.69s   |     2.02s     | 2806964  |
| case_26  |  1000  |    1    |  2.65s   |     2.85s     | 2434821  |
| case_27  |  1000  |    1    |  2.75s   |     1.63s     | 2818284  |
| case_28  |  1000  |    1    |  4.17s   |     3.63s     | 2682971  |
| case_29  |  1000  |    1    |  3.19s   |     2.06s     | 2776843  |
| case_30  |  1000  |    1    |  2.76s   |     3.00s     | 2561019  |
| case_31  |  1000  |    1    |  2.72s   |     2.22s     | 2978178  |
| case_32  |  1000  |    1    |  2.76s   |     3.66s     | 2513562  |
| case_33  |  2000  |    1    |  3.43s   |     9.03s     | 4080432  |
| case_34  |  2000  |    1    |  3.55s   |    14.20s     | 3582922  |
| case_35  |  2000  |    1    |  3.42s   |    12.25s     | 4444497  |
| case_36  |  2000  |    1    |  3.58s   |    19.50s     | 3650737  |
| case_37  |  2000  |    1    |  3.43s   |    17.06s     | 4185146  |
| case_38  |  2000  |    1    |  3.56s   |    20.70s     | 3576355  |
| case_39  |  2000  |    1    |  3.65s   |     5.98s     | 4319307  |
| case_40  |  2000  |    1    |  3.41s   |    12.06s     | 3826821  |
| case_41  |  5000  |    1    |  6.93s   |    25.93s     | 6644640  |
| case_42  |  5000  |    1    |  6.79s   |    35.04s     | 5801719  |
| case_43  |  5000  |    1    |  6.79s   |    14.34s     | 6558989  |
| case_44  |  5000  |    1    |  6.77s   |    38.46s     | 5740503  |
| case_45  |  5000  |    1    |  6.83s   |    24.83s     | 6514149  |
| case_46  |  5000  |    1    |  6.77s   |    30.63s     | 5980613  |
| case_47  |  5000  |    1    |  6.79s   |    11.39s     | 6859678  |
| case_48  |  5000  |    1    |  6.78s   |    23.29s     | 6024386  |
| case_49  | 10000  |    1    |  9.60s   |    29.02s     | 9210713  |
| case_50  | 10000  |    1    |  9.68s   |    55.69s     | 9151430  |
| case_51  | 10000  |    1    |  9.61s   |    28.55s     | 9157904  |
| case_52  | 10000  |    1    |  9.66s   |    38.37s     | 8346835  |
| case_53  | 10000  |    1    |  9.66s   |    40.15s     | 9289098  |
| case_54  | 10000  |    1    |  9.58s   |    30.00s     | 8499449  |
| case_55  | 10000  |    1    |  9.64s   |    29.78s     | 9564715  |
| case_56  | 10000  |    1    |  9.74s   |    31.92s     | 8111795  |  
与SCAN基线对比：   
调度算法总加分:17525358440.00	调度用时总加分:6235.28	调度超时总罚分:56130.74	排序错误总数量:0.00	
总分:17525308544.54


#### 增量节点7：增量节点6 + 修改大规模算例POPMUSIC_Solutions参数大小
[增量节点7](./test/调参增量节点/增量节点7)
|   算例   |  IO数量 |子问题数 | Ascent时间|局部搜索最多用时|  最终Cost |
|----------|--------|---------|----------|---------------|----------|
|  case_1  |   10   |    1    |  0.00s   |      0s       |  285068  |
|  case_2  |   10   |    1    |  0.00s   |      0s       |  308991  |
|  case_3  |   10   |    1    |  0.00s   |      0s       |  368584  |
|  case_4  |   10   |    1    |  0.00s   |      0s       |  220352  |
|  case_5  |   10   |    1    |  0.00s   |      0s       |  338956  |
|  case_6  |   10   |    1    |  0.00s   |      0s       |  259553  |
|  case_7  |   10   |    1    |  0.00s   |      0s       |  282807  |
|  case_8  |   10   |    1    |  0.00s   |      0s       |  249496  |
|  case_9  |   50   |    1    |  0.01s   |     0.00s     |  666119  |
| case_10  |   50   |    1    |  0.01s   |      0s       |  550503  |
| case_11  |   50   |    1    |  0.01s   |     0.00s     |  647764  |
| case_12  |   50   |    1    |  0.01s   |     0.00s     |  528100  |
| case_13  |   50   |    1    |  0.01s   |     0.00s     |  653578  |
| case_14  |   50   |    1    |  0.01s   |      0s       |  455149  |
| case_15  |   50   |    1    |  0.01s   |     0.00s     |  682731  |
| case_16  |   50   |    1    |  0.01s   |     0.00s     |  578165  |
| case_17  |  100   |    1    |  0.02s   |     0.00s     |  910244  |
| case_18  |  100   |    1    |  0.02s   |      0s       |  708750  |
| case_19  |  100   |    1    |  0.02s   |      0s       |  885041  |
| case_20  |  100   |    1    |  0.02s   |     0.00s     |  704578  |
| case_21  |  100   |    1    |  0.02s   |      0s       |  855075  |
| case_22  |  100   |    1    |  0.02s   |     0.01s     |  784901  |
| case_23  |  100   |    1    |  0.02s   |     0.00s     |  880008  |
| case_24  |  100   |    1    |  0.03s   |      0s       |  741581  |
| case_25  |  1000  |    1    |  2.71s   |     2.02s     | 2806964  |
| case_26  |  1000  |    1    |  2.63s   |     2.93s     | 2434821  |
| case_27  |  1000  |    1    |  2.84s   |     1.60s     | 2818284  |
| case_28  |  1000  |    1    |  4.14s   |     3.62s     | 2682971  |
| case_29  |  1000  |    1    |  3.17s   |     2.04s     | 2776843  |
| case_30  |  1000  |    1    |  2.68s   |     2.94s     | 2561019  |
| case_31  |  1000  |    1    |  2.80s   |     2.19s     | 2978178  |
| case_32  |  1000  |    1    |  2.74s   |     3.61s     | 2513562  |
| case_33  |  2000  |    1    |  3.78s   |     9.16s     | 4080432  |
| case_34  |  2000  |    1    |  3.43s   |    14.08s     | 3582922  |
| case_35  |  2000  |    1    |  3.47s   |    12.43s     | 4444497  |
| case_36  |  2000  |    1    |  3.55s   |    20.23s     | 3650737  |
| case_37  |  2000  |    1    |  3.52s   |    16.88s     | 4185146  |
| case_38  |  2000  |    1    |  3.53s   |    22.06s     | 3576355  |
| case_39  |  2000  |    1    |  3.48s   |     6.16s     | 4319307  |
| case_40  |  2000  |    1    |  3.49s   |    11.93s     | 3826821  |
| case_41  |  5000  |    1    |  8.56s   |    32.88s     | 6641531  |
| case_42  |  5000  |    1    |  8.52s   |    25.88s     | 5806767  |
| case_43  |  5000  |    1    |  8.58s   |    21.03s     | 6550094  |
| case_44  |  5000  |    1    |  8.69s   |    36.20s     | 5739461  |
| case_45  |  5000  |    1    |  8.65s   |    19.06s     | 6511253  |
| case_46  |  5000  |    1    |  8.58s   |    44.47s     | 5981616  |
| case_47  |  5000  |    1    |  8.64s   |    24.01s     | 6844971  |
| case_48  |  5000  |    1    |  8.50s   |    22.37s     | 6021771  |
| case_49  | 10000  |    1    |  11.62s  |    47.63s     | 9197843  |
| case_50  | 10000  |    1    |  11.56s  |    58.71s     | 9150283  |
| case_51  | 10000  |    1    |  11.59s  |    27.85s     | 9168311  |
| case_52  | 10000  |    1    |  11.63s  |    34.59s     | 8323996  |
| case_53  | 10000  |    1    |  11.75s  |    27.90s     | 9344492  |
| case_54  | 10000  |    1    |  11.70s  |    36.08s     | 8484838  |
| case_55  | 10000  |    1    |  11.82s  |    26.97s     | 9559794  |
| case_56  | 10000  |    1    |  11.74s  |    15.95s     | 8148574  |
与SCAN基线对比：  
调度算法总加分:17525168650.00	调度用时总加分:6221.81	调度超时总罚分:61477.13	排序错误总数量:0.00	
总分:17525113394.68

#### 增量节点8：增量节点6 + 总时间限制40s(提交版本，交的时候乘个7, TraceLevel改为0)
[增量节点8](./test/调参增量节点/增量节点8)
|   算例   |  IO数量 |子问题数 | Ascent时间|局部搜索最多用时|  最终Cost |
|----------|--------|---------|----------|---------------|----------|
|  case_1  |   10   |    1    |  0.00s   |      0s       |  285068  |
|  case_2  |   10   |    1    |  0.00s   |      0s       |  308991  |
|  case_3  |   10   |    1    |  0.00s   |      0s       |  368584  |
|  case_4  |   10   |    1    |  0.00s   |      0s       |  220352  |
|  case_5  |   10   |    1    |  0.00s   |      0s       |  338956  |
|  case_6  |   10   |    1    |  0.00s   |      0s       |  259553  |
|  case_7  |   10   |    1    |  0.00s   |      0s       |  282807  |
|  case_8  |   10   |    1    |  0.00s   |      0s       |  249496  |
|  case_9  |   50   |    1    |  0.01s   |     0.00s     |  666119  |
| case_10  |   50   |    1    |  0.01s   |      0s       |  550503  |
| case_11  |   50   |    1    |  0.01s   |     0.00s     |  647764  |
| case_12  |   50   |    1    |  0.01s   |     0.00s     |  528100  |
| case_13  |   50   |    1    |  0.01s   |     0.00s     |  653578  |
| case_14  |   50   |    1    |  0.01s   |      0s       |  455149  |
| case_15  |   50   |    1    |  0.01s   |     0.00s     |  682731  |
| case_16  |   50   |    1    |  0.01s   |     0.00s     |  578165  |
| case_17  |  100   |    1    |  0.02s   |     0.00s     |  910244  |
| case_18  |  100   |    1    |  0.02s   |      0s       |  708750  |
| case_19  |  100   |    1    |  0.03s   |      0s       |  885041  |
| case_20  |  100   |    1    |  0.02s   |     0.00s     |  704578  |
| case_21  |  100   |    1    |  0.02s   |      0s       |  855075  |
| case_22  |  100   |    1    |  0.02s   |     0.01s     |  784901  |
| case_23  |  100   |    1    |  0.02s   |     0.00s     |  880008  |
| case_24  |  100   |    1    |  0.03s   |      0s       |  741581  |
| case_25  |  1000  |    1    |  2.71s   |     2.00s     | 2806964  |
| case_26  |  1000  |    1    |  2.66s   |     2.83s     | 2434821  |
| case_27  |  1000  |    1    |  2.75s   |     1.56s     | 2818284  |
| case_28  |  1000  |    1    |  4.18s   |     3.66s     | 2682971  |
| case_29  |  1000  |    1    |  3.11s   |     2.10s     | 2776843  |
| case_30  |  1000  |    1    |  2.74s   |     3.04s     | 2561019  |
| case_31  |  1000  |    1    |  2.73s   |     2.26s     | 2978178  |
| case_32  |  1000  |    1    |  2.77s   |     3.62s     | 2513562  |
| case_33  |  2000  |    1    |  3.59s   |     9.45s     | 4080432  |
| case_34  |  2000  |    1    |  3.55s   |    14.10s     | 3582922  |
| case_35  |  2000  |    1    |  3.59s   |    12.42s     | 4444497  |
| case_36  |  2000  |    1    |  3.57s   |    20.12s     | 3650737  |
| case_37  |  2000  |    1    |  3.73s   |    16.69s     | 4185146  |
| case_38  |  2000  |    1    |  3.59s   |    21.24s     | 3576355  |
| case_39  |  2000  |    1    |  3.63s   |     6.20s     | 4319307  |
| case_40  |  2000  |    1    |  3.63s   |    12.06s     | 3826821  |
| case_41  |  5000  |    1    |  6.77s   |    26.83s     | 6644640  |
| case_42  |  5000  |    1    |  6.86s   |    32.41s     | 5801739  |
| case_43  |  5000  |    1    |  6.90s   |    14.44s     | 6558989  |
| case_44  |  5000  |    1    |  6.78s   |    32.46s     | 5740889  |
| case_45  |  5000  |    1    |  6.81s   |    24.87s     | 6514149  |
| case_46  |  5000  |    1    |  6.87s   |    29.89s     | 5980613  |
| case_47  |  5000  |    1    |  6.87s   |    11.35s     | 6859678  |
| case_48  |  5000  |    1    |  6.90s   |    23.41s     | 6024386  |
| case_49  | 10000  |    1    |  9.64s   |    27.45s     | 9210713  |
| case_50  | 10000  |    1    |  9.64s   |    27.27s     | 9186318  |
| case_51  | 10000  |    1    |  9.67s   |    27.42s     | 9157904  |
| case_52  | 10000  |    1    |  9.62s   |    27.42s     | 8352458  |
| case_53  | 10000  |    1    |  9.65s   |    27.38s     | 9313261  |
| case_54  | 10000  |    1    |  9.66s   |    27.37s     | 8500137  |
| case_55  | 10000  |    1    |  9.75s   |    27.17s     | 9564769  |
| case_56  | 10000  |    1    |  9.80s   |    27.13s     | 8112390  |
与SCAN基线对比：  
调度算法总加分:17524694270.00	调度用时总加分:6222.90	调度超时总罚分:42487.29	排序错误总数量:0.00	
总分:17524658005.61

### 10月25日 初赛出分，暂时第一，晋级决赛
### 10月26日 修改为使用实时算代价，替换原使用邻接矩阵的形式
修改后，小规模算例测试用时微微增加，但是大规模算例用时却减少了。  
修改前，IO=10000用例平均内存消耗约770MB左右，修改后IO=10000用例平均内存消耗约16MB左右。

### 10月27日 调整权重测试得分
#### 增量节点9
[增量节点9](./test/调参增量节点/增量节点9)
| 寻址:磨损 比例 | 调度算法总加分 | 调度用时总加分 | 调度超时总罚分 | 空间超限总罚分 | 排序错误总数量 |       总分     |
|---------------|----------------|----------------|----------------|----------------|----------------|----------------|
|      1:1      | 27387180120.00 |    5942.79     |   95340.81     |    5016.31     |      0.00      | 27387085705.67 |
|      6:4      | 27379013530.00 |    5987.54     |   89926.27     |    4616.09     |      0.00      | 27378924975.18 |
|      4:6      | 27384219940.00 |    5949.67     |   87894.48     |    4436.60     |      0.00      | 27384133558.59 |
|      7:3      | 27360063370.00 |    6197.21     |   74525.30     |    4732.84     |      0.00      | 27359990309.07 |
|      3:7      | 27375807590.00 |    5980.03     |   89479.41     |    4762.05     |      0.00      | 27375719328.57 |
|      1:0      | 27209591020.00 |    6053.56     |   61258.92     |    4814.43     |      0.00      | 27209531000.21 |
|      0:1      | 27228716410.00 |    6336.22     |   43081.96     |    4987.08     |      0.00      | 27228674677.17 |

**结论**：寻址：磨损 = 1:1时效果最好。

### 10月28日 测试参数 MaxCandidates
|   算例   |  IO数量 |  总用时  |  最终Cost |  总用时  |  最终Cos  |  总用时  |  最终Cost |  总用时  |  最终Cost |  推荐  |
|----------|--------|----------|----------|----------|----------|----------|----------|----------|----------|--------|
|          |        ||  MaxCandidates=5   ||  MaxCandidates=15  ||  MaxCandidates=10  ||  MaxCandidates=7   |        |
|  case_1  |   10   |   0.0s   |  956222  |   0.0s   |  956222  |   0.0s   |  956222  |   0.0s   |  956222  | 5      |
|  case_2  |   10   |   0.0s   | 1076566  |   0.0s   | 1076566  |   0.0s   | 1076566  |   0.0s   | 1076566  | 5      |
|  case_3  |   10   |   0.0s   | 1355445  |   0.0s   | 1355445  |   0.0s   | 1355445  |   0.0s   | 1355445  | 5      |
|  case_4  |   10   |   0.0s   |  772107  |   0.0s   |  772107  |   0.0s   |  772107  |   0.0s   |  772107  | 5      |
|  case_5  |   10   |   0.0s   | 1237294  |   0.0s   | 1237294  |   0.0s   | 1237294  |   0.0s   | 1237294  | 5      |
|  case_6  |   10   |   0.0s   |  790180  |   0.0s   |  790180  |   0.0s   |  790180  |   0.0s   |  790180  | 5      |
|  case_7  |   10   |   0.0s   |  942916  |   0.0s   |  942916  |   0.0s   |  942916  |   0.0s   |  942916  | 5      |
|  case_8  |   10   |   0.0s   |  783944  |   0.0s   |  783944  |   0.0s   |  783944  |   0.0s   |  783944  | 5      |
|  case_9  |   50   |  0.02s   | 1731306  |  0.02s   | 1731306  |  0.02s   | 1731306  |  0.02s   | 1731306  | 5      |
| case_10  |   50   |  0.01s   | 1387743  |  0.01s   | 1387743  |  0.01s   | 1387743  |  0.01s   | 1387743  | 5      |
| case_11  |   50   |  0.02s   | 1797698  |  0.03s   | 1797698  |  0.03s   | 1797698  |  0.02s   | 1797698  | 5      |
| case_12  |   50   |  0.02s   | 1380483  |  0.02s   | 1380483  |  0.02s   | 1380483  |  0.02s   | 1380483  | 5      |
| case_13  |   50   |  0.01s   | 1587336  |  0.01s   | 1587336  |  0.01s   | 1587336  |  0.01s   | 1587336  | 5      |
| case_14  |   50   |  0.02s   | 1110926  |  0.02s   | 1110926  |  0.02s   | 1110926  |  0.02s   | 1110926  | 5      |
| case_15  |   50   |  0.04s   | 1786599  |  0.04s   | 1786599  |  0.04s   | 1786599  |  0.04s   | 1786599  | 5      |
| case_16  |   50   |  0.02s   | 1495616  |  0.02s   | 1495616  |  0.02s   | 1495616  |  0.02s   | 1495616  | 5      |
| case_17  |  100   |   0.1s   | 2215431  |  0.13s   | 2215431  |  0.12s   | 2215431  |  0.11s   | 2215431  | 5      |
| case_18  |  100   |   0.1s   | 1796133  |  0.14s   | 1796133  |  0.14s   | 1796133  |  0.11s   | 1796133  | 5      |
| case_19  |  100   |  0.06s   | 2178541  |  0.06s   | 2178541  |  0.07s   | 2178541  |  0.06s   | 2178541  | 5      |
| case_20  |  100   |  0.08s   | 1665863  |   0.1s   | 1665863  |  0.09s   | 1665863  |  0.09s   | 1665863  | 5      |
| case_21  |  100   |  0.07s   | 2121472  |  0.07s   | 2121472  |  0.07s   | 2121472  |  0.07s   | 2121472  | 5      |
| case_22  |  100   |  0.07s   | 1844423  |  0.08s   | 1844423  |  0.08s   | 1844423  |  0.07s   | 1844423  | 5      |
| case_23  |  100   |  0.07s   | 2143671  |  0.08s   | 2143671  |  0.08s   | 2143671  |  0.07s   | 2143671  | 5      |
| case_24  |  100   |  0.08s   | 1695596  |  0.09s   | 1695596  |  0.09s   | 1695596  |  0.09s   | 1695596  | 5      |
| case_25  |  1000  |  6.63s   | 5479153  |  9.37s   | 5479153  |  8.14s   | 5479153  |  7.17s   | 5479153  | 5      |
| case_26  |  1000  |  6.49s   | 4882454  |  9.95s   | 4882454  |   8.6s   | 4882454  |  7.17s   | 4882454  | 5      |
| case_27  |  1000  |  5.59s   | 5548498  |  7.32s   | 5548498  |  7.07s   | 5548498  |   6.2s   | 5548498  | 5      |
| case_28  |  1000  |  7.31s   | 5486411  |  14.08s  | 5486406  |  11.03s  | 5486406  |  8.81s   | 5486411  | 5      |
| case_29  |  1000  |  5.38s   | 5440980  |  9.63s   | 5440980  |   7.7s   | 5440980  |  6.48s   | 5440980  | 5      |
| case_30  |  1000  |   6.3s   | 5198872  |  9.67s   | 5198872  |  8.41s   | 5198872  |  7.39s   | 5198872  | 5      |
| case_31  |  1000  |  6.22s   | 5852014  |   8.9s   | 5852014  |  7.78s   | 5852014  |  7.05s   | 5852014  | 5      |
| case_32  |  1000  |  7.12s   | 5053336  |  11.36s  | 5053336  |  9.53s   | 5053336  |  8.46s   | 5053336  | 5      |
| case_33  |  2000  |  26.21s  | 8071487  |  37.01s  | 8069522  |  26.32s  | 8069596  |  23.4s   | 8069924  | 15     |
| case_34  |  2000  |  19.31s  | 7078016  |  33.35s  | 7075106  |  24.35s  | 7077212  |  22.04s  | 7077369  | 15     |
| case_35  |  2000  |  25.17s  | 8706334  |  37.78s  | 8693705  |  31.86s  | 8693748  |  30.37s  | 8694050  | 15     |
| case_36  |  2000  |  15.26s  | 7277223  |  34.55s  | 7273529  |  29.55s  | 7273784  |  29.41s  | 7273672  | 15     |
| case_37  |  2000  |  18.69s  | 8135957  |  18.77s  | 8134201  |  32.96s  | 8134096  |  21.11s  | 8134777  | 10->15 |
| case_38  |  2000  |  26.29s  | 7167008  |  54.91s  | 7166627  |  39.94s  | 7171177  |  30.0s   | 7167791  | 15     |
| case_39  |  2000  |  19.64s  | 8382600  |  35.5s   | 8374676  |  25.18s  | 8374789  |  26.08s  | 8379300  | 15     |
| case_40  |  2000  |  28.31s  | 7443365  |  29.19s  | 7442875  |  48.8s   | 7442748  |  28.38s  | 7444744  | 10->15 |
| case_41  |  5000  |  43.62s  | 12898830 |  49.42s  | 12889347 |  35.59s  | 12896951 |  33.72s  | 12902436 | 15     |
| case_42  |  5000  |  69.57s  | 11670603 |  72.69s  | 11673865 |  54.61s  | 11683219 |  35.56s  | 11676859 | 5->15  |
| case_43  |  5000  |  21.7s   | 12873662 |  69.22s  | 12844203 |  36.53s  | 12849548 |  19.99s  | 12886323 | 15     |
| case_44  |  5000  |  49.56s  | 11374309 |  61.37s  | 11369811 |  44.89s  | 11380881 |  62.51s  | 11374224 | 15     |
| case_45  |  5000  |  22.22s  | 12671929 |  57.27s  | 12658764 |  33.46s  | 12661406 |  39.73s  | 12663804 | 15     |
| case_46  |  5000  |  27.51s  | 11569491 |  45.39s  | 11563033 |  59.71s  | 11564696 |  43.13s  | 11568931 | 15     |
| case_47  |  5000  |  35.85s  | 13373179 |  54.29s  | 13363431 |  26.58s  | 13370925 |  33.71s  | 13372456 | 15     |
| case_48  |  5000  |  32.04s  | 11679559 |  47.44s  | 11660353 |  53.79s  | 11663138 |  76.71s  | 11663412 | 15     |
| case_49  | 10000  |  63.76s  | 18047757 |  96.26s  | 18073805 |  73.79s  | 18046777 |  74.4s   | 18035691 | 7->10  |
| case_50  | 10000  |  92.98s  | 19257016 | 191.82s  | 19263533 | 164.56s  | 19261087 | 102.71s  | 19255549 | 7->5   |
| case_51  | 10000  |  71.56s  | 17983890 |  62.87s  | 17972144 |  45.61s  | 18023343 |  72.94s  | 17988466 | 15->5  |
| case_52  | 10000  |  60.49s  | 16988592 |  143.5s  | 16929180 |  43.9s   | 17077244 |  75.11s  | 16956181 | 15->7  |
| case_53  | 10000  |  36.14s  | 18332266 |  52.7s   | 18231283 |  69.63s  | 18218704 |  81.48s  | 18265483 | 10->15 |
| case_54  | 10000  |  64.56s  | 16748895 |  44.41s  | 16890962 | 109.45s  | 16721997 |  43.73s  | 16841113 | 10->5  |
| case_55  | 10000  |  88.01s  | 18563744 |  46.97s  | 18551689 |  50.49s  | 18552079 |  57.51s  | 18556883 | 15->10 |
| case_56  | 10000  |  77.37s  | 15850312 |  43.38s  | 15858062 |  72.51s  | 15823075 |  51.76s  | 15825176 | 10->7  |
|    总分  |        ||   27387087071.01   ||  27388264986.78    ||  27388202568.34    ||  27387794679.53    ||

**结论**：IO<=5000的， MaxCandidates 的值按表中推荐来设置，1万的待商榷。 10月30日，已不推荐，时间变长，得不偿失。

#### 增量节点10 最新参数存档
[增量节点10](./test/调参增量节点/增量节点10)
|   算例   |  IO数量 |  总用时  |  最终Cost |
|----------|--------|----------|----------|
|  case_1  |   10   |   0.0s   |  956222  |
|  case_2  |   10   |   0.0s   | 1076566  |
|  case_3  |   10   |   0.0s   | 1355445  |
|  case_4  |   10   |   0.0s   |  772107  |
|  case_5  |   10   |   0.0s   | 1237294  |
|  case_6  |   10   |   0.0s   |  790180  |
|  case_7  |   10   |   0.0s   |  942916  |
|  case_8  |   10   |   0.0s   |  783944  |
|  case_9  |   50   |  0.02s   | 1731306  |
| case_10  |   50   |  0.01s   | 1387743  |
| case_11  |   50   |  0.02s   | 1797698  |
| case_12  |   50   |  0.02s   | 1380483  |
| case_13  |   50   |  0.01s   | 1587336  |
| case_14  |   50   |  0.02s   | 1110926  |
| case_15  |   50   |  0.04s   | 1786599  |
| case_16  |   50   |  0.02s   | 1495616  |
| case_17  |  100   |   0.1s   | 2215431  |
| case_18  |  100   |   0.1s   | 1796133  |
| case_19  |  100   |  0.06s   | 2178541  |
| case_20  |  100   |  0.08s   | 1665863  |
| case_21  |  100   |  0.07s   | 2121472  |
| case_22  |  100   |  0.07s   | 1844423  |
| case_23  |  100   |  0.07s   | 2143671  |
| case_24  |  100   |  0.08s   | 1695596  |
| case_25  |  1000  |  6.51s   | 5479153  |
| case_26  |  1000  |   6.6s   | 4882454  |
| case_27  |  1000  |  5.65s   | 5548498  |
| case_28  |  1000  |  7.58s   | 5486411  |
| case_29  |  1000  |  5.36s   | 5440980  |
| case_30  |  1000  |   6.3s   | 5198872  |
| case_31  |  1000  |  6.35s   | 5852014  |
| case_32  |  1000  |  7.15s   | 5053336  |
| case_33  |  2000  |  37.15s  | 8069522  |
| case_34  |  2000  |  33.39s  | 7075106  |
| case_35  |  2000  |  37.93s  | 8693705  |
| case_36  |  2000  |  34.55s  | 7273529  |
| case_37  |  2000  |  18.61s  | 8134201  |
| case_38  |  2000  |  54.26s  | 7166627  |
| case_39  |  2000  |  35.17s  | 8374676  |
| case_40  |  2000  |  29.01s  | 7442875  |
| case_41  |  5000  |  35.53s  | 12887443 |
| case_42  |  5000  | 119.44s  | 11658674 |
| case_43  |  5000  |  68.74s  | 12844323 |
| case_44  |  5000  |  75.28s  | 11368634 |
| case_45  |  5000  |  32.14s  | 12658896 |
| case_46  |  5000  |  59.42s  | 11555225 |
| case_47  |  5000  |  49.79s  | 13361813 |
| case_48  |  5000  |  46.09s  | 11657893 |
| case_49  | 10000  |  86.9s   | 18012638 |
| case_50  | 10000  | 109.84s  | 19255978 |
| case_51  | 10000  |  76.5s   | 18018373 |
| case_52  | 10000  |  59.34s  | 16952752 |
| case_53  | 10000  |  87.79s  | 18202520 |
| case_54  | 10000  |  94.06s  | 16727962 |
| case_55  | 10000  |  89.47s  | 18573648 |
| case_56  | 10000  |  77.26s  | 15829514 |  
调度算法总加分:27390675090.00	调度用时总加分:5890.96	调度超时总罚分:141735.40	空间超限总罚分:5962.24	排序错误总数量:0.00	
总分:27390533283.33

### 10月29日 10月30日
官方公布了详细计分规则，读时延还包括排序时间（算法运行时间，单位ms），所以隐含的时间罚分还是比较严重，故提升单位罚分参数，以提前跳出。
#### 比较不同时间约束下的相比SCAN基线提升
[增量节点11](./test/调参增量节点/增量节点11) 本次测试所用参数
|      算法      |  总排序时间  |  总寻址时间  |  总带体磨损  |  总电机磨损  |    总消耗    | 相比SCAN提升 |
|----------------|--------------|--------------|--------------|--------------|--------------|--------------|
|  基线(SCAN)    |    15.15     |  1940777413  |  1317257261  |    491785    |3258526474.15 |      0%      |
|  最近邻(NN)    |   55612.46   |  276360376   |  392741944   |    34387     | 669192319.46 |    79.463%   |
|  贪心插入(GI)  |   71012.04   |  240136025   |  347698827   |    25109     | 587930973.04 |    81.957%   |
|  最大匹配(MM)-g|  138450.59   |  209146968   |  373063240   |    15469     | 582364127.59 |    82.128%   |
|  最大匹配(MM)-r|  138313.27   |  255778200   |  526281664   |    16701     | 782214878.26 |    75.995%   |
|  LKH-NN-20s    |  465945.32   |  194365692   |  327928034   |    14437     | 522774108.32 |    83.957%   |
|  LKH-NN-40s    |  646226.09   |  193682282   |  326706728   |    14595     | 521049831.09 |    84.010%   |
|  LKH-NN-100s   |  810665.23   |  193719703   |  325713715   |    14793     | 520258876.23 |    84.034%   |
|  LKH-GI-100s   |  896888.48   |  194298915   |  326306274   |    14721     | 521516798.48 |    83.995%   |
|  LKH-MM-g-100s |  727424.71   |  193603941   |  325605676   |    14937     | 519951978.71 |    84.043%   |
|  LKH-MM-r-100s |  711808.00   |  193656336   |  325501559   |    14981     | 519884684.0  |    `84.045%`   |  

注：上述时间为最大允许运行时间。-g为贪心拼接，-r为随机拼接。
**分析**：LKH-MM-r-100s（LKH+随机拼接的最大匹配初始解）的结果最优。

### 10月31日
#### 将distance = 电机寻址+带体磨损+电机磨损 改为 distance = 电机寻址+带体磨损，实测有提升
分析：`电机磨损`的数值太小了，相比前两个不是一个量级的，加上了对结果没啥影响，反而浪费了计算时间。

#### 测试1万算例的参数 POPMUSIC_Solutions,POPMUSIC_SampleSize
|      参数，方法     |  总排序时间  |  总寻址时间  |  总带体磨损  |  总电机磨损  |    总消耗    |
|---------------------|--------------|--------------|--------------|--------------|--------------|
| IO=10000,20,30,mm-r |  405844.31   |   72933194   |  143975324   |     5238     | 217319600.31 |
| IO=10000,15,20,mm-r |  302587.48   |   72909483   |  144029349   |     5172     | 217246591.48 |
| IO=10000,10,20,mm-r |  257601.39   |   72893454   |  143979146   |     5166     | 217135367.39 |
| IO=10000,10,10,mm-r |  213923.05   |   73230218   |  143571890   |     5372     | `217021403.05` |
| IO=10000,10,10,mm-g |  203272.38   |   73192816   |  143679913   |     5364     | 217081365.38 |

#### 目前最优
|      算法      |  总排序时间  |  总寻址时间  |  总带体磨损  |  总电机磨损  |    总消耗    | 相比SCAN提升 |
|----------------|--------------|--------------|--------------|--------------|--------------|--------------|
|  LKH-MM-r-100s |  491655.16   |  193990393   |  324991783   |    15159     | 519488990.16 |   `84.058%`  |

#### 测试5000算例的参数 POPMUSIC_Solutions,POPMUSIC_SampleSize
|      参数，方法     |  总排序时间  |  总寻址时间  |  总带体磨损  |  总电机磨损  |    总消耗    |
|---------------------|--------------|--------------|--------------|--------------|--------------|
| IO=5000,25,20,mm-r  |  141313.58   |   51535076   |   85003951   |     4055     | 136684395.58 |
| IO=5000,25,15,mm-r  |  116128.27   |   51577224   |   84971523   |     4075     | 136668950.27 |
| IO=5000,25,10,mm-r  |  101928.30   |   51592782   |   84965160   |     4079     | 136663949.30 |
| IO=5000,20,10,mm-r  |   97163.67   |   51553399   |   85002788   |     4053     | `136657403.66` |
| IO=5000,15,10,mm-r  |   86560.63   |   51595884   |   85018974   |     4057     | 136705475.63 |

#### 测试2000算例的参数 POPMUSIC_Solutions,POPMUSIC_SampleSize
|      参数，方法     |  总排序时间  |  总寻址时间  |  总带体磨损  |  总电机磨损  |    总消耗    |
|---------------------|--------------|--------------|--------------|--------------|--------------|
| IO=2000,50,20,mm-r  |   84436.66   |   32684081   |   45260681   |     2746     | 78031944.66  |
| IO=2000,50,15,mm-r  |   67091.98   |   32683697   |   45260603   |     2746     | 78014137.98  |
| IO=2000,50,10,mm-r  |   59035.79   |   32665895   |   45284122   |     2734     | `78011786.79`  |
| IO=2000,40,10,mm-r  |   61323.14   |   32698732   |   45271493   |     2750     | 78034298.14  |
| IO=2000,30,10,mm-r  |   50144.99   |   32698885   |   45271573   |     2750     | 78023352.99  |

#### 调参后目前最优
|      算法      |  总排序时间  |  总寻址时间  |  总带体磨损  |  总电机磨损  |    总消耗    | 相比SCAN提升 |
|----------------|--------------|--------------|--------------|--------------|--------------|--------------|
|  LKH-MM-r-100s |  425239.83   |  193990530   |  325014061   |    15145     | 519444975.83 |   `84.059%`  |

### 11月12日 决赛第一轮出分，评分规则大改了，导致我们成绩十分落后，仅14名
+ 修改距离权重计算方式
+ 修改评分脚本score.py

### 11月13日 修改代码
+ 修改测试用例生成脚本dataset_generator.py，增加考虑连续数据段和倒序数据段，区分高性能场景(hdd)和归档备份场景(backup)，hdd样例60个，backup样例28个，共88个
+ 算法增加自动检测高性能场景(hdd)和归档备份场景(backup)的功能，以此赋予不同的优化权重
+ 修改批量测试脚本testbatch.py的部分输出内容

### 11月14日
+ 增加20s内单位调度用时加分参数，控制提前跳出
+ 修改最大匹配算法为稀疏图实现（使用邻接表）

### 11月15日
+ 实现自动调参脚本param_adjust.py
+ 调整缩放系数`maxbase`, 减少较小Cost的精度丢失且较大Cost不能造成溢出

### 11月16日
+ 重新设置参数范围继续自动调参

#### 调参后目前最优
##### output_LKH_nn_bestParam
读时延总加分:1860.37	带体磨损总加分:1450.01	电机磨损总加分:1082.52	
调度算法总加分:4392.90	调度用时总加分:135.69	调度超时总罚分:0.00	
空间超限总罚分:0.00	排序错误总数量:0.00	
总分:`4528.59` 
##### output_LKH_nn_bestParam_noshuffle
读时延总加分:1860.11	带体磨损总加分:1450.01	电机磨损总加分:1082.31	
调度算法总加分:4392.44	调度用时总加分:135.79	调度超时总罚分:0.00	
空间超限总罚分:0.00	排序错误总数量:0.00	
总分:4528.23
##### output_LKH_nn_bestParam_noBeltWear nn省磨损函数，LKH不省
读时延总加分:1862.09	带体磨损总加分:1451.58	电机磨损总加分:1083.75	
调度算法总加分:4397.43	调度用时总加分:152.15	调度超时总罚分:0.00	
空间超限总罚分:1.39	排序错误总数量:0.00	
总分:4548.19
##### output_LKH_nn_bestParam_noSeekTime nn省寻址函数，LKH不省
读时延总加分:1859.70	带体磨损总加分:1448.53	电机磨损总加分:1082.64	
调度算法总加分:4390.86	调度用时总加分:150.68	调度超时总罚分:0.00	
空间超限总罚分:0.35	排序错误总数量:0.00	
总分:4541.20
##### output_LKH_nn_bestParam_noBeltWear_vis nn省磨损函数，LKH不省
读时延总加分:1862.09	带体磨损总加分:1451.54	电机磨损总加分:1083.75	
调度算法总加分:4397.39	调度用时总加分:161.83	调度超时总罚分:0.00	
空间超限总罚分:17.45	排序错误总数量:0.00	
总分:4541.77

### 11月17日 补测出分，排名第二，因为1万的算例确实时间加分权重太大了，大家都去跑贪心算法了
+ 优化最近邻代码，减少最近邻的时间
+ 优化最大匹配

### 11月19日-21日
+ 实现多轮线性SCAN扫描算法，用于1w的算例
+ 减少统计时间跨度TimeSpan值，各个规模设置不同值
+ 1w的算例用多轮线性SCAN扫描算法（纯基于几何位置构造）的话，不用调基线算base值，省时间

#### 提交版本 io<10000用LKH_NN, io=10000用多轮线性SCAN扫描
读时延总加分:1859.55	带体磨损总加分:1425.60	电机磨损总加分:1087.06	
调度算法总加分:4372.22	调度用时总加分:209.88	调度超时总罚分:0.00	
空间超限总罚分:0.00	排序错误总数量:0.00	
总分:4582.10